(()=>{"use strict";class t{constructor(t,e){this.pageIndex=t,this.firstVisibleElementPath=e}equals(t){return this.pageIndex==t.pageIndex&&this.firstVisibleElementPath==t.firstVisibleElementPath}}class e{constructor(t,e){this.pageWidth=t,this.scrollWidth=e,this.pageCount=Math.round(this.scrollWidth/this.pageWidth)}equals(t){return this.pageWidth==t.pageWidth&&this.scrollWidth==t.scrollWidth&&this.pageCount==t.pageCount}}function n(t){return"object"==typeof t&&null!==t&&t.nodeType===Node.ELEMENT_NODE}const o={id:"id",class:"class",tag:"tag",attribute:"attribute",nthchild:"nthchild",nthoftype:"nthoftype"};function r(t="unknown problem",...e){console.warn(`CssSelectorGenerator: ${t}`,...e)}const i={selectors:[o.id,o.class,o.tag,o.attribute],includeTag:!1,whitelist:[],blacklist:[],combineWithinSelector:!0,combineBetweenSelectors:!0,root:null,maxCombinations:Number.POSITIVE_INFINITY,maxCandidates:Number.POSITIVE_INFINITY};function c(t){return t instanceof RegExp}function s(t){return["string","function"].includes(typeof t)||c(t)}function u(t){return Array.isArray(t)?t.filter(s):[]}function a(t){const e=[Node.DOCUMENT_NODE,Node.DOCUMENT_FRAGMENT_NODE,Node.ELEMENT_NODE];return function(t){return t instanceof Node}(t)&&e.includes(t.nodeType)}function l(t,e){if(a(t))return t.contains(e)||r("element root mismatch","Provided root does not contain the element. This will most likely result in producing a fallback selector using element's real root node. If you plan to use the selector using provided root (e.g. `root.querySelector`), it will not work as intended."),t;const n=e.getRootNode({composed:!1});return a(n)?(n!==document&&r("shadow root inferred","You did not provide a root and the element is a child of Shadow DOM. This will produce a selector using ShadowRoot as a root. If you plan to use the selector using document as a root (e.g. `document.querySelector`), it will not work as intended."),n):w(e)}function d(t){return"number"==typeof t?t:Number.POSITIVE_INFINITY}function f(t=[]){const[e=[],...n]=t;return 0===n.length?e:n.reduce(((t,e)=>t.filter((t=>e.includes(t)))),e)}function g(t){return[].concat(...t)}function h(t){const e=t.map((t=>{if(c(t))return e=>t.test(e);if("function"==typeof t)return e=>{const n=t(e);return"boolean"!=typeof n?(r("pattern matcher function invalid","Provided pattern matching function does not return boolean. It's result will be ignored.",t),!1):n};if("string"==typeof t){const e=new RegExp("^"+t.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".+")+"$");return t=>e.test(t)}return r("pattern matcher invalid","Pattern matching only accepts strings, regular expressions and/or functions. This item is invalid and will be ignored.",t),()=>!1}));return t=>e.some((e=>e(t)))}function m(t,e,n){const o=Array.from(l(n,t[0]).querySelectorAll(e));return o.length===t.length&&t.every((t=>o.includes(t)))}function p(t,e){e=null!=e?e:w(t);const o=[];let r=t;for(;n(r)&&r!==e;)o.push(r),r=r.parentElement;return o}function b(t,e){return f(t.map((t=>p(t,e))))}function w(t){return t.ownerDocument.querySelector(":root")}const y=new RegExp(["^$","\\s"].join("|")),I=new RegExp(["^$"].join("|")),E=[o.nthoftype,o.tag,o.id,o.class,o.attribute,o.nthchild],C=h(["class","id","ng-*"]);function N({name:t}){return`[${t}]`}function T({name:t,value:e}){return`[${t}='${e}']`}function x({nodeName:t,nodeValue:e}){return{name:B(t),value:B(null!=e?e:void 0)}}function S(t){const e=Array.from(t.attributes).filter((e=>function({nodeName:t,nodeValue:e},n){const o=n.tagName.toLowerCase();return!(["input","option"].includes(o)&&"value"===t||"src"===t&&(null==e?void 0:e.startsWith("data:"))||C(t))}(e,t))).map(x);return[...e.map(N),...e.map(T)]}function v(t){var e;return(null!==(e=t.getAttribute("class"))&&void 0!==e?e:"").trim().split(/\s+/).filter((t=>!I.test(t))).map((t=>`.${B(t)}`))}function P(t){var e;const n=null!==(e=t.getAttribute("id"))&&void 0!==e?e:"",o=`#${B(n)}`,r=t.getRootNode({composed:!1});return!y.test(n)&&m([t],o,r)?[o]:[]}function _(t){const e=t.parentNode;if(e){const o=Array.from(e.childNodes).filter(n).indexOf(t);if(o>-1)return[`:nth-child(${String(o+1)})`]}return[]}function O(t){return[B(t.tagName.toLowerCase())]}function j(t){const e=[...new Set(g(t.map(O)))];return 0===e.length||e.length>1?[]:[e[0]]}function A(t){const e=j([t])[0],n=t.parentElement;if(n){const o=Array.from(n.children).filter((t=>t.tagName.toLowerCase()===e)),r=o.indexOf(t);if(r>-1)return[`${e}:nth-of-type(${String(r+1)})`]}return[]}function R(t=[],{maxResults:e=Number.POSITIVE_INFINITY}={}){return Array.from(function*(t=[],{maxResults:e=Number.POSITIVE_INFINITY}={}){let n=0,o=W(1);for(;o.length<=t.length&&n<e;){n+=1;const e=o.map((e=>t[e]));yield e,o=V(o,t.length-1)}}(t,{maxResults:e}))}function V(t=[],e=0){const n=t.length;if(0===n)return[];const o=[...t];o[n-1]+=1;for(let t=n-1;t>=0;t--)if(o[t]>e){if(0===t)return W(n+1);o[t-1]++,o[t]=o[t-1]+1}return o[n-1]>e?W(n+1):o}function W(t=1){return Array.from(Array(t).keys())}const $=":".charCodeAt(0).toString(16).toUpperCase(),M=/[ !"#$%&'()\[\]{|}<>*+,./;=?@^`~\\]/;function B(t=""){return CSS?CSS.escape(t):function(t=""){return t.split("").map((t=>":"===t?`\\${$} `:M.test(t)?`\\${t}`:escape(t).replace(/%/g,"\\"))).join("")}(t)}const k={tag:j,id:function(t){return 0===t.length||t.length>1?[]:P(t[0])},class:function(t){return f(t.map(v))},attribute:function(t){return f(t.map(S))},nthchild:function(t){return f(t.map(_))},nthoftype:function(t){return f(t.map(A))}},q={tag:O,id:P,class:v,attribute:S,nthchild:_,nthoftype:A};function D(t){return t.includes(o.tag)||t.includes(o.nthoftype)?[...t]:[...t,o.tag]}function F(t={}){const e=[...E];return t[o.tag]&&t[o.nthoftype]&&e.splice(e.indexOf(o.tag),1),e.map((e=>{return(o=t)[n=e]?o[n].join(""):"";var n,o})).join("")}function L(t,e,n="",o){const r=function(t,e){return""===e?t:function(t,e){return[...t.map((t=>e+" "+t)),...t.map((t=>e+" > "+t))]}(t,e)}(function(t,e,n){const o=function(t,e){const{blacklist:n,whitelist:o,combineWithinSelector:r,maxCombinations:i}=e,c=h(n),s=h(o);return function(t){const{selectors:e,includeTag:n}=t,o=[...e];return n&&!o.includes("tag")&&o.push("tag"),o}(e).reduce(((e,n)=>{const o=function(t,e){return(0,k[e])(t)}(t,n),u=function(t=[],e,n){return t.filter((t=>n(t)||!e(t)))}(o,c,s),a=function(t=[],e){return t.sort(((t,n)=>{const o=e(t),r=e(n);return o&&!r?-1:!o&&r?1:0}))}(u,s);return e[n]=r?R(a,{maxResults:i}):a.map((t=>[t])),e}),{})}(t,n),r=function(t,e){return function(t){const{selectors:e,combineBetweenSelectors:n,includeTag:o,maxCandidates:r}=t,i=n?R(e,{maxResults:r}):e.map((t=>[t]));return o?i.map(D):i}(e).map((e=>function(t,e){const n={};return t.forEach((t=>{const o=e[t];o&&o.length>0&&(n[t]=o)})),function(t={}){let e=[];return Object.entries(t).forEach((([t,n])=>{e=n.flatMap((n=>0===e.length?[{[t]:n}]:e.map((e=>Object.assign(Object.assign({},e),{[t]:n})))))})),e}(n).map(F)}(e,t))).filter((t=>t.length>0))}(o,n),i=g(r);return[...new Set(i)]}(t,0,o),n);for(const n of r)if(m(t,n,e))return n;return null}function Y(t){return{value:t,include:!1}}function U({selectors:t,operator:e}){let n=[...E];t[o.tag]&&t[o.nthoftype]&&(n=n.filter((t=>t!==o.tag)));let r="";return n.forEach((e=>{var n;(null!==(n=t[e])&&void 0!==n?n:[]).forEach((({value:t,include:e})=>{e&&(r+=t)}))})),e+r}function G(t){return[":root",...p(t).reverse().map((t=>{const e=function(t,e,n=""){const o={};return e.forEach((e=>{Reflect.set(o,e,function(t,e){return q[e](t)}(t,e).map(Y))})),{element:t,operator:n,selectors:o}}(t,[o.nthchild]," > ");return e.selectors.nthchild.forEach((t=>{t.include=!0})),e})).map(U)].join("")}const H=function t(e,r={}){var c;const s=function(t){(t instanceof NodeList||t instanceof HTMLCollection)&&(t=Array.from(t));const e=(Array.isArray(t)?t:[t]).filter(n);return[...new Set(e)]}(e),a=function(t,e={}){const n=Object.assign(Object.assign({},i),e);return{selectors:(r=n.selectors,Array.isArray(r)?r.filter((t=>{return e=o,n=t,Object.values(e).includes(n);var e,n})):[]),whitelist:u(n.whitelist),blacklist:u(n.blacklist),root:l(n.root,t),combineWithinSelector:!!n.combineWithinSelector,combineBetweenSelectors:!!n.combineBetweenSelectors,includeTag:!!n.includeTag,maxCombinations:d(n.maxCombinations),maxCandidates:d(n.maxCandidates)};var r}(s[0],r),f=null!==(c=a.root)&&void 0!==c?c:w(s[0]);let g="",h=f;function p(){return function(t,e,n="",o){if(0===t.length)return null;const r=[t.length>1?t:[],...b(t,e).map((t=>[t]))];for(const t of r){const r=L(t,e,n,o);if(r)return{foundElements:t,selector:r}}return null}(s,h,g,a)}let y=p();for(;y;){const{foundElements:t,selector:e}=y;if(m(s,e,f))return e;h=t[0],g=e,y=p()}return s.length>1?s.map((e=>t(e,a))).join(", "):function(t){return t.map(G).join(", ")}(s)},X=1e-5;class z{constructor(){this._viewPortInfo=null}_getFirstVisibleElement(t,e){const n=document.querySelectorAll("body *");for(let o=0;o<n.length;o++){const r=n[o],i=r.getBoundingClientRect();if(i.left+X>=e*t.pageWidth&&i.left<(e+1)*t.pageWidth)return r}return document.body}_getPathOfElement(t){return H(t)}_getCurrentPageIndex(t){const e=window.scrollX;return Math.round(e/t.pageWidth)}getCurrentPageInfo(){const e=this.getViewPortInfo(),n=this._getCurrentPageIndex(e),o=this._getFirstVisibleElement(e,n),r=this._getPathOfElement(o);return new t(n,r)}getViewPortInfo(){const t=document.body.getBoundingClientRect().width,n=document.createRange();n.selectNodeContents(document.body);const o=n.getBoundingClientRect().width;return new e(t,o)}injectCss(t){const e=atob(t);let n=document.getElementById(z._injectCssId);n||(n=document.createElement("style"),n.id=z._injectCssId,document.head.appendChild(n)),n.textContent=e}_getElementByPath(t){return document.querySelector(t)}pageIndexOfElement(t){const e=this._getElementByPath(t);if(!e)return-1;const n=e.getBoundingClientRect().left+window.scrollX;return Math.floor(n/this.getViewPortInfo().pageWidth+X)}paginateTo(t){t=Math.min(Math.max(t,0),this.getViewPortInfo().pageCount-1),window.scrollTo(t*this.getViewPortInfo().pageWidth,0)}paginateToElement(t){const e=this.pageIndexOfElement(t);e>=0&&this.paginateTo(e)}}z._injectCssId="__inject_css__";const J=new z;window.api=function(t){return{injectCss:t.injectCss.bind(t),getViewPortInfo:t.getViewPortInfo.bind(t),getCurrentPageInfo:t.getCurrentPageInfo.bind(t),paginateTo:t.paginateTo.bind(t),paginateToElement:t.paginateToElement.bind(t),pageIndexOfElement:t.pageIndexOfElement.bind(t)}}(J),window.onload=()=>{console.log(window.api),window.flutter_inappwebview.callHandler("onAllReady")}})();